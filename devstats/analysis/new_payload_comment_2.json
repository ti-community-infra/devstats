{
  "actor": {
    "avatar_url": "https://avatars.githubusercontent.com/u/129656?",
    "display_login": "zverok",
    "gravatar_id": "",
    "id": 129656,
    "login": "zverok",
    "url": "https://api.github.com/users/zverok"
  },
  "created_at": "2016-06-02T17:59:55Z",
  "id": "4095565224",
  "payload": {
    "action": "created",
    "comment": {
      "_links": {
        "html": {
          "href": "https://github.com/v0dro/daru/pull/134#discussion_r65588260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/v0dro/daru/pulls/134"
        },
        "self": {
          "href": "https://api.github.com/repos/v0dro/daru/pulls/comments/65588260"
        }
      },
      "body": "No problem :) I'm only happy to help.",
      "commit_id": "c6e3b67ec32a2be97540ac424a107e550e304325",
      "created_at": "2016-06-02T17:59:55Z",
      "diff_hunk": "@@ -392,4 +474,109 @@ def sparse_tuples\n       }\n     end\n   end\n-end\n+\n+  class CategoricalIndex < Index\n+    \n+    include Enumerable\n+    \n+    attr_reader :cat_hash, :array, :map_cat_int, :map_int_cat\n+    \n+    def initialize indexes\n+      # Create a hash to map each category to positional indexes\n+      @cat_hash = Hash.new []\n+      # To link every instance to its category,\n+      # it stores integer for every instance representing its category\n+      @array = []\n+      # Map each category to a unique integer for effective storage in @array\n+      map_cat_int = {}\n+      # Inverse mapping of @map\n+      @map_int_cat = {}\n+      \n+      cat_count = 0\n+      indexes.each_with_index do |index, pos|\n+        unless map_cat_int.include? index\n+          map_cat_int[index] = cat_count\n+          @map_int_cat[cat_count] = index\n+          cat_count += 1\n+        end\n+        @cat_hash[index] += [pos]\n+        @array << map_cat_int[index]\n+      end\n+    end\n+    \n+    def dup\n+      Daru::CategoricalIndex.new to_a\n+    end\n+    \n+    def include? index\n+      @cat_hash.include? index\n+    end\n+    \n+    def pos *args\n+      positions = args.map do |index|\n+        if include? index\n+          @cat_hash[index]\n+        elsif index.is_a?(Numeric) && index < @array.size\n+          index\n+        else\n+          raise IndexError, \"#{index.inspect} is neither a valid category\"\\\n+            \" nor a valid position\"\n+        end",
      "html_url": "https://github.com/v0dro/daru/pull/134#discussion_r65588260",
      "id": 65588260.0,
      "original_commit_id": "c6e3b67ec32a2be97540ac424a107e550e304325",
      "original_position": 162,
      "path": "lib/daru/index.rb",
      "position": 162,
      "pull_request_url": "https://api.github.com/repos/v0dro/daru/pulls/134",
      "updated_at": "2016-06-02T17:59:55Z",
      "url": "https://api.github.com/repos/v0dro/daru/pulls/comments/65588260",
      "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/129656?v=3",
        "events_url": "https://api.github.com/users/zverok/events{/privacy}",
        "followers_url": "https://api.github.com/users/zverok/followers",
        "following_url": "https://api.github.com/users/zverok/following{/other_user}",
        "gists_url": "https://api.github.com/users/zverok/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zverok",
        "id": 129656,
        "login": "zverok",
        "organizations_url": "https://api.github.com/users/zverok/orgs",
        "received_events_url": "https://api.github.com/users/zverok/received_events",
        "repos_url": "https://api.github.com/users/zverok/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zverok/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zverok/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zverok"
      }
    },
    "pull_request": {
      "_links": {
        "comments": {
          "href": "https://api.github.com/repos/v0dro/daru/issues/134/comments"
        },
        "commits": {
          "href": "https://api.github.com/repos/v0dro/daru/pulls/134/commits"
        },
        "html": {
          "href": "https://github.com/v0dro/daru/pull/134"
        },
        "issue": {
          "href": "https://api.github.com/repos/v0dro/daru/issues/134"
        },
        "review_comment": {
          "href": "https://api.github.com/repos/v0dro/daru/pulls/comments{/number}"
        },
        "review_comments": {
          "href": "https://api.github.com/repos/v0dro/daru/pulls/134/comments"
        },
        "self": {
          "href": "https://api.github.com/repos/v0dro/daru/pulls/134"
        },
        "statuses": {
          "href": "https://api.github.com/repos/v0dro/daru/statuses/c6e3b67ec32a2be97540ac424a107e550e304325"
        }
      },
      "assignee": null,
      "base": {
        "label": "v0dro:master",
        "ref": "master",
        "repo": {
          "archive_url": "https://api.github.com/repos/v0dro/daru/{archive_format}{/ref}",
          "assignees_url": "https://api.github.com/repos/v0dro/daru/assignees{/user}",
          "blobs_url": "https://api.github.com/repos/v0dro/daru/git/blobs{/sha}",
          "branches_url": "https://api.github.com/repos/v0dro/daru/branches{/branch}",
          "clone_url": "https://github.com/v0dro/daru.git",
          "collaborators_url": "https://api.github.com/repos/v0dro/daru/collaborators{/collaborator}",
          "comments_url": "https://api.github.com/repos/v0dro/daru/comments{/number}",
          "commits_url": "https://api.github.com/repos/v0dro/daru/commits{/sha}",
          "compare_url": "https://api.github.com/repos/v0dro/daru/compare/{base}...{head}",
          "contents_url": "https://api.github.com/repos/v0dro/daru/contents/{+path}",
          "contributors_url": "https://api.github.com/repos/v0dro/daru/contributors",
          "created_at": "2014-10-04T08:23:21Z",
          "default_branch": "master",
          "deployments_url": "https://api.github.com/repos/v0dro/daru/deployments",
          "description": "Data Analysis in RUby",
          "downloads_url": "https://api.github.com/repos/v0dro/daru/downloads",
          "events_url": "https://api.github.com/repos/v0dro/daru/events",
          "fork": false,
          "forks": 32,
          "forks_count": 32,
          "forks_url": "https://api.github.com/repos/v0dro/daru/forks",
          "full_name": "v0dro/daru",
          "git_commits_url": "https://api.github.com/repos/v0dro/daru/git/commits{/sha}",
          "git_refs_url": "https://api.github.com/repos/v0dro/daru/git/refs{/sha}",
          "git_tags_url": "https://api.github.com/repos/v0dro/daru/git/tags{/sha}",
          "git_url": "git://github.com/v0dro/daru.git",
          "has_downloads": true,
          "has_issues": true,
          "has_pages": false,
          "has_wiki": true,
          "homepage": null,
          "hooks_url": "https://api.github.com/repos/v0dro/daru/hooks",
          "html_url": "https://github.com/v0dro/daru",
          "id": 24784998.0,
          "issue_comment_url": "https://api.github.com/repos/v0dro/daru/issues/comments{/number}",
          "issue_events_url": "https://api.github.com/repos/v0dro/daru/issues/events{/number}",
          "issues_url": "https://api.github.com/repos/v0dro/daru/issues{/number}",
          "keys_url": "https://api.github.com/repos/v0dro/daru/keys{/key_id}",
          "labels_url": "https://api.github.com/repos/v0dro/daru/labels{/name}",
          "language": "Ruby",
          "languages_url": "https://api.github.com/repos/v0dro/daru/languages",
          "merges_url": "https://api.github.com/repos/v0dro/daru/merges",
          "milestones_url": "https://api.github.com/repos/v0dro/daru/milestones{/number}",
          "mirror_url": null,
          "name": "daru",
          "notifications_url": "https://api.github.com/repos/v0dro/daru/notifications{?since,all,participating}",
          "open_issues": 27,
          "open_issues_count": 27,
          "owner": {
            "avatar_url": "https://avatars.githubusercontent.com/u/2629909?v=3",
            "events_url": "https://api.github.com/users/v0dro/events{/privacy}",
            "followers_url": "https://api.github.com/users/v0dro/followers",
            "following_url": "https://api.github.com/users/v0dro/following{/other_user}",
            "gists_url": "https://api.github.com/users/v0dro/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/v0dro",
            "id": 2629909.0,
            "login": "v0dro",
            "organizations_url": "https://api.github.com/users/v0dro/orgs",
            "received_events_url": "https://api.github.com/users/v0dro/received_events",
            "repos_url": "https://api.github.com/users/v0dro/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/v0dro/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/v0dro/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/v0dro"
          },
          "private": false,
          "pulls_url": "https://api.github.com/repos/v0dro/daru/pulls{/number}",
          "pushed_at": "2016-06-02T17:33:44Z",
          "releases_url": "https://api.github.com/repos/v0dro/daru/releases{/id}",
          "size": 3619,
          "ssh_url": "git@github.com:v0dro/daru.git",
          "stargazers_count": 113,
          "stargazers_url": "https://api.github.com/repos/v0dro/daru/stargazers",
          "statuses_url": "https://api.github.com/repos/v0dro/daru/statuses/{sha}",
          "subscribers_url": "https://api.github.com/repos/v0dro/daru/subscribers",
          "subscription_url": "https://api.github.com/repos/v0dro/daru/subscription",
          "svn_url": "https://github.com/v0dro/daru",
          "tags_url": "https://api.github.com/repos/v0dro/daru/tags",
          "teams_url": "https://api.github.com/repos/v0dro/daru/teams",
          "trees_url": "https://api.github.com/repos/v0dro/daru/git/trees{/sha}",
          "updated_at": "2016-06-01T21:20:29Z",
          "url": "https://api.github.com/repos/v0dro/daru",
          "watchers": 113,
          "watchers_count": 113
        },
        "sha": "9f31896a561c822593e2918213274859ddc0f10c",
        "user": {
          "avatar_url": "https://avatars.githubusercontent.com/u/2629909?v=3",
          "events_url": "https://api.github.com/users/v0dro/events{/privacy}",
          "followers_url": "https://api.github.com/users/v0dro/followers",
          "following_url": "https://api.github.com/users/v0dro/following{/other_user}",
          "gists_url": "https://api.github.com/users/v0dro/gists{/gist_id}",
          "gravatar_id": "",
          "html_url": "https://github.com/v0dro",
          "id": 2629909.0,
          "login": "v0dro",
          "organizations_url": "https://api.github.com/users/v0dro/orgs",
          "received_events_url": "https://api.github.com/users/v0dro/received_events",
          "repos_url": "https://api.github.com/users/v0dro/repos",
          "site_admin": false,
          "starred_url": "https://api.github.com/users/v0dro/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/v0dro/subscriptions",
          "type": "User",
          "url": "https://api.github.com/users/v0dro"
        }
      },
      "body": "The coding begins!\r\n\r\nThis PR adds `CategoricalIndex` to Daru. ",
      "closed_at": null,
      "comments_url": "https://api.github.com/repos/v0dro/daru/issues/134/comments",
      "commits_url": "https://api.github.com/repos/v0dro/daru/pulls/134/commits",
      "created_at": "2016-05-23T05:08:33Z",
      "diff_url": "https://github.com/v0dro/daru/pull/134.diff",
      "head": {
        "label": "lokeshh:cat_index",
        "ref": "cat_index",
        "repo": {
          "archive_url": "https://api.github.com/repos/lokeshh/daru/{archive_format}{/ref}",
          "assignees_url": "https://api.github.com/repos/lokeshh/daru/assignees{/user}",
          "blobs_url": "https://api.github.com/repos/lokeshh/daru/git/blobs{/sha}",
          "branches_url": "https://api.github.com/repos/lokeshh/daru/branches{/branch}",
          "clone_url": "https://github.com/lokeshh/daru.git",
          "collaborators_url": "https://api.github.com/repos/lokeshh/daru/collaborators{/collaborator}",
          "comments_url": "https://api.github.com/repos/lokeshh/daru/comments{/number}",
          "commits_url": "https://api.github.com/repos/lokeshh/daru/commits{/sha}",
          "compare_url": "https://api.github.com/repos/lokeshh/daru/compare/{base}...{head}",
          "contents_url": "https://api.github.com/repos/lokeshh/daru/contents/{+path}",
          "contributors_url": "https://api.github.com/repos/lokeshh/daru/contributors",
          "created_at": "2016-02-08T17:09:21Z",
          "default_branch": "master",
          "deployments_url": "https://api.github.com/repos/lokeshh/daru/deployments",
          "description": "Data Analysis in RUby",
          "downloads_url": "https://api.github.com/repos/lokeshh/daru/downloads",
          "events_url": "https://api.github.com/repos/lokeshh/daru/events",
          "fork": true,
          "forks": 0,
          "forks_count": 0,
          "forks_url": "https://api.github.com/repos/lokeshh/daru/forks",
          "full_name": "lokeshh/daru",
          "git_commits_url": "https://api.github.com/repos/lokeshh/daru/git/commits{/sha}",
          "git_refs_url": "https://api.github.com/repos/lokeshh/daru/git/refs{/sha}",
          "git_tags_url": "https://api.github.com/repos/lokeshh/daru/git/tags{/sha}",
          "git_url": "git://github.com/lokeshh/daru.git",
          "has_downloads": true,
          "has_issues": false,
          "has_pages": false,
          "has_wiki": true,
          "homepage": null,
          "hooks_url": "https://api.github.com/repos/lokeshh/daru/hooks",
          "html_url": "https://github.com/lokeshh/daru",
          "id": 51312435.0,
          "issue_comment_url": "https://api.github.com/repos/lokeshh/daru/issues/comments{/number}",
          "issue_events_url": "https://api.github.com/repos/lokeshh/daru/issues/events{/number}",
          "issues_url": "https://api.github.com/repos/lokeshh/daru/issues{/number}",
          "keys_url": "https://api.github.com/repos/lokeshh/daru/keys{/key_id}",
          "labels_url": "https://api.github.com/repos/lokeshh/daru/labels{/name}",
          "language": "Ruby",
          "languages_url": "https://api.github.com/repos/lokeshh/daru/languages",
          "merges_url": "https://api.github.com/repos/lokeshh/daru/merges",
          "milestones_url": "https://api.github.com/repos/lokeshh/daru/milestones{/number}",
          "mirror_url": null,
          "name": "daru",
          "notifications_url": "https://api.github.com/repos/lokeshh/daru/notifications{?since,all,participating}",
          "open_issues": 0,
          "open_issues_count": 0,
          "owner": {
            "avatar_url": "https://avatars.githubusercontent.com/u/7677524?v=3",
            "events_url": "https://api.github.com/users/lokeshh/events{/privacy}",
            "followers_url": "https://api.github.com/users/lokeshh/followers",
            "following_url": "https://api.github.com/users/lokeshh/following{/other_user}",
            "gists_url": "https://api.github.com/users/lokeshh/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/lokeshh",
            "id": 7677524.0,
            "login": "lokeshh",
            "organizations_url": "https://api.github.com/users/lokeshh/orgs",
            "received_events_url": "https://api.github.com/users/lokeshh/received_events",
            "repos_url": "https://api.github.com/users/lokeshh/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/lokeshh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lokeshh/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/lokeshh"
          },
          "private": false,
          "pulls_url": "https://api.github.com/repos/lokeshh/daru/pulls{/number}",
          "pushed_at": "2016-06-02T17:33:44Z",
          "releases_url": "https://api.github.com/repos/lokeshh/daru/releases{/id}",
          "size": 3313,
          "ssh_url": "git@github.com:lokeshh/daru.git",
          "stargazers_count": 1,
          "stargazers_url": "https://api.github.com/repos/lokeshh/daru/stargazers",
          "statuses_url": "https://api.github.com/repos/lokeshh/daru/statuses/{sha}",
          "subscribers_url": "https://api.github.com/repos/lokeshh/daru/subscribers",
          "subscription_url": "https://api.github.com/repos/lokeshh/daru/subscription",
          "svn_url": "https://github.com/lokeshh/daru",
          "tags_url": "https://api.github.com/repos/lokeshh/daru/tags",
          "teams_url": "https://api.github.com/repos/lokeshh/daru/teams",
          "trees_url": "https://api.github.com/repos/lokeshh/daru/git/trees{/sha}",
          "updated_at": "2016-05-28T07:11:32Z",
          "url": "https://api.github.com/repos/lokeshh/daru",
          "watchers": 1,
          "watchers_count": 1
        },
        "sha": "c6e3b67ec32a2be97540ac424a107e550e304325",
        "user": {
          "avatar_url": "https://avatars.githubusercontent.com/u/7677524?v=3",
          "events_url": "https://api.github.com/users/lokeshh/events{/privacy}",
          "followers_url": "https://api.github.com/users/lokeshh/followers",
          "following_url": "https://api.github.com/users/lokeshh/following{/other_user}",
          "gists_url": "https://api.github.com/users/lokeshh/gists{/gist_id}",
          "gravatar_id": "",
          "html_url": "https://github.com/lokeshh",
          "id": 7677524.0,
          "login": "lokeshh",
          "organizations_url": "https://api.github.com/users/lokeshh/orgs",
          "received_events_url": "https://api.github.com/users/lokeshh/received_events",
          "repos_url": "https://api.github.com/users/lokeshh/repos",
          "site_admin": false,
          "starred_url": "https://api.github.com/users/lokeshh/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/lokeshh/subscriptions",
          "type": "User",
          "url": "https://api.github.com/users/lokeshh"
        }
      },
      "html_url": "https://github.com/v0dro/daru/pull/134",
      "id": 71005450.0,
      "issue_url": "https://api.github.com/repos/v0dro/daru/issues/134",
      "locked": false,
      "merge_commit_sha": "2880b4e5e613e79420b13a8e320e8a5a133c4019",
      "merged_at": null,
      "milestone": null,
      "number": 134,
      "patch_url": "https://github.com/v0dro/daru/pull/134.patch",
      "review_comment_url": "https://api.github.com/repos/v0dro/daru/pulls/comments{/number}",
      "review_comments_url": "https://api.github.com/repos/v0dro/daru/pulls/134/comments",
      "state": "open",
      "statuses_url": "https://api.github.com/repos/v0dro/daru/statuses/c6e3b67ec32a2be97540ac424a107e550e304325",
      "title": "[WIP] Categorical Index",
      "updated_at": "2016-06-02T17:59:55Z",
      "url": "https://api.github.com/repos/v0dro/daru/pulls/134",
      "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/7677524?v=3",
        "events_url": "https://api.github.com/users/lokeshh/events{/privacy}",
        "followers_url": "https://api.github.com/users/lokeshh/followers",
        "following_url": "https://api.github.com/users/lokeshh/following{/other_user}",
        "gists_url": "https://api.github.com/users/lokeshh/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lokeshh",
        "id": 7677524.0,
        "login": "lokeshh",
        "organizations_url": "https://api.github.com/users/lokeshh/orgs",
        "received_events_url": "https://api.github.com/users/lokeshh/received_events",
        "repos_url": "https://api.github.com/users/lokeshh/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lokeshh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lokeshh/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lokeshh"
      }
    }
  },
  "public": true,
  "repo": {
    "id": 24784998.0,
    "name": "v0dro/daru",
    "url": "https://api.github.com/repos/v0dro/daru"
  },
  "type": "PullRequestReviewCommentEvent",
  "a_structure": "{_links:,body:,commit_id:,created_at:,diff_hunk:,html_url:,id:,original_commit_id:,original_position:,path:,position:,pull_request_url:,updated_at:,url:,user:}"
}