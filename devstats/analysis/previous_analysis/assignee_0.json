{
  "id": "6197998503",
  "type": "PullRequestReviewCommentEvent",
  "actor": {
    "id": 2967288,
    "login": "andreldsa",
    "display_login": "andreldsa",
    "gravatar_id": "",
    "url": "https://api.github.com/users/andreldsa",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967288?"
  },
  "repo": {
    "id": 91336041,
    "name": "eciis/web",
    "url": "https://api.github.com/repos/eciis/web"
  },
  "payload": {
    "action": "created",
    "comment": {
      "url": "https://api.github.com/repos/eciis/web/pulls/comments/125717198",
      "pull_request_review_id": 48133927,
      "id": 125717198,
      "diff_hunk": "@@ -72,28 +72,31 @@\n         }\n \n         institutionCtrl.follow = function follow(){\n-            var promise = InstitutionService.follow(currentInstitutionKey);\n-            promise.then(function success(){\n+            var deffered = $q.defer();\n+            InstitutionService.follow(currentInstitutionKey).then(function success(){\n                 showToast(\"Seguindo \"+institutionCtrl.current_institution.name);\n                 institutionCtrl.user.follow(currentInstitutionKey);\n                 getFollowers();\n+                deffered.resolve();\n             });\n-            return promise;\n+            return deffered.promise;\n         };\n \n         institutionCtrl.unfollow = function unfollow(){\n+            var deffered = $q.defer();\n             if(institutionCtrl.user.isMember(institutionCtrl.current_institution.key)){\n                 showToast(\"Você não pode deixar de seguir \" + institutionCtrl.current_institution.name);\n+                deffered.reject();",
      "path": "app/institution/institutionController.js",
      "position": 27,
      "original_position": 30,
      "commit_id": "dfabc07d461fa5a0b8c02993f7890942e81cfb12",
      "original_commit_id": "94d289da5af49112760b3b0413b3a64a22c14a1d",
      "user": {
        "login": "andreldsa",
        "id": 2967288,
        "avatar_url": "https://avatars1.githubusercontent.com/u/2967288?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andreldsa",
        "html_url": "https://github.com/andreldsa",
        "followers_url": "https://api.github.com/users/andreldsa/followers",
        "following_url": "https://api.github.com/users/andreldsa/following{/other_user}",
        "gists_url": "https://api.github.com/users/andreldsa/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/andreldsa/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/andreldsa/subscriptions",
        "organizations_url": "https://api.github.com/users/andreldsa/orgs",
        "repos_url": "https://api.github.com/users/andreldsa/repos",
        "events_url": "https://api.github.com/users/andreldsa/events{/privacy}",
        "received_events_url": "https://api.github.com/users/andreldsa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "cuidado, testa bem isso manualmente, isso pode dar unhandled promise rejection",
      "created_at": "2017-07-05T18:07:52Z",
      "updated_at": "2017-07-05T18:08:29Z",
      "html_url": "https://github.com/eciis/web/pull/151#discussion_r125717198",
      "pull_request_url": "https://api.github.com/repos/eciis/web/pulls/151",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/eciis/web/pulls/comments/125717198"
        },
        "html": {
          "href": "https://github.com/eciis/web/pull/151#discussion_r125717198"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/eciis/web/pulls/151"
        }
      }
    },
    "pull_request": {
      "url": "https://api.github.com/repos/eciis/web/pulls/151",
      "id": 126985251,
      "html_url": "https://github.com/eciis/web/pull/151",
      "diff_url": "https://github.com/eciis/web/pull/151.diff",
      "patch_url": "https://github.com/eciis/web/pull/151.patch",
      "issue_url": "https://api.github.com/repos/eciis/web/issues/151",
      "number": 151,
      "state": "open",
      "locked": false,
      "title": "User model + Home and Institution Controller Tests ",
      "user": {
        "login": "tiagolimpe",
        "id": 20300259,
        "avatar_url": "https://avatars0.githubusercontent.com/u/20300259?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tiagolimpe",
        "html_url": "https://github.com/tiagolimpe",
        "followers_url": "https://api.github.com/users/tiagolimpe/followers",
        "following_url": "https://api.github.com/users/tiagolimpe/following{/other_user}",
        "gists_url": "https://api.github.com/users/tiagolimpe/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tiagolimpe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tiagolimpe/subscriptions",
        "organizations_url": "https://api.github.com/users/tiagolimpe/orgs",
        "repos_url": "https://api.github.com/users/tiagolimpe/repos",
        "events_url": "https://api.github.com/users/tiagolimpe/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tiagolimpe/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "",
      "created_at": "2017-06-22T12:55:21Z",
      "updated_at": "2017-07-05T18:08:29Z",
      "closed_at": null,
      "merged_at": null,
      "merge_commit_sha": "2f9b6d08252e3eede39c245f304291639cc0a77b",
      "assignee": {
        "login": "tiagolimpe",
        "id": 20300259,
        "avatar_url": "https://avatars0.githubusercontent.com/u/20300259?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tiagolimpe",
        "html_url": "https://github.com/tiagolimpe",
        "followers_url": "https://api.github.com/users/tiagolimpe/followers",
        "following_url": "https://api.github.com/users/tiagolimpe/following{/other_user}",
        "gists_url": "https://api.github.com/users/tiagolimpe/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tiagolimpe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tiagolimpe/subscriptions",
        "organizations_url": "https://api.github.com/users/tiagolimpe/orgs",
        "repos_url": "https://api.github.com/users/tiagolimpe/repos",
        "events_url": "https://api.github.com/users/tiagolimpe/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tiagolimpe/received_events",
        "type": "User",
        "site_admin": false
      },
      "assignees": [
        {
          "login": "tiagolimpe",
          "id": 20300259,
          "avatar_url": "https://avatars0.githubusercontent.com/u/20300259?v=3",
          "gravatar_id": "",
          "url": "https://api.github.com/users/tiagolimpe",
          "html_url": "https://github.com/tiagolimpe",
          "followers_url": "https://api.github.com/users/tiagolimpe/followers",
          "following_url": "https://api.github.com/users/tiagolimpe/following{/other_user}",
          "gists_url": "https://api.github.com/users/tiagolimpe/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/tiagolimpe/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/tiagolimpe/subscriptions",
          "organizations_url": "https://api.github.com/users/tiagolimpe/orgs",
          "repos_url": "https://api.github.com/users/tiagolimpe/repos",
          "events_url": "https://api.github.com/users/tiagolimpe/events{/privacy}",
          "received_events_url": "https://api.github.com/users/tiagolimpe/received_events",
          "type": "User",
          "site_admin": false
        }
      ],
      "requested_reviewers": [

      ],
      "milestone": {
        "url": "https://api.github.com/repos/eciis/web/milestones/1",
        "html_url": "https://github.com/eciis/web/milestone/1",
        "labels_url": "https://api.github.com/repos/eciis/web/milestones/1/labels",
        "id": 2524939,
        "number": 1,
        "title": "Release 0.1",
        "description": "Basic REST API and Frontend, creating posts e relationships between users/institutions.\r\n\r\n> Mocked Institutions and Users",
        "creator": {
          "login": "andreldsa",
          "id": 2967288,
          "avatar_url": "https://avatars1.githubusercontent.com/u/2967288?v=3",
          "gravatar_id": "",
          "url": "https://api.github.com/users/andreldsa",
          "html_url": "https://github.com/andreldsa",
          "followers_url": "https://api.github.com/users/andreldsa/followers",
          "following_url": "https://api.github.com/users/andreldsa/following{/other_user}",
          "gists_url": "https://api.github.com/users/andreldsa/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/andreldsa/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/andreldsa/subscriptions",
          "organizations_url": "https://api.github.com/users/andreldsa/orgs",
          "repos_url": "https://api.github.com/users/andreldsa/repos",
          "events_url": "https://api.github.com/users/andreldsa/events{/privacy}",
          "received_events_url": "https://api.github.com/users/andreldsa/received_events",
          "type": "User",
          "site_admin": false
        },
        "open_issues": 16,
        "closed_issues": 160,
        "state": "open",
        "created_at": "2017-05-16T18:05:48Z",
        "updated_at": "2017-07-05T14:05:44Z",
        "due_on": "2017-06-24T07:00:00Z",
        "closed_at": null
      },
      "commits_url": "https://api.github.com/repos/eciis/web/pulls/151/commits",
      "review_comments_url": "https://api.github.com/repos/eciis/web/pulls/151/comments",
      "review_comment_url": "https://api.github.com/repos/eciis/web/pulls/comments{/number}",
      "comments_url": "https://api.github.com/repos/eciis/web/issues/151/comments",
      "statuses_url": "https://api.github.com/repos/eciis/web/statuses/dfabc07d461fa5a0b8c02993f7890942e81cfb12",
      "head": {
        "label": "eciis:Test-homeController",
        "ref": "Test-homeController",
        "sha": "dfabc07d461fa5a0b8c02993f7890942e81cfb12",
        "user": {
          "login": "eciis",
          "id": 28706805,
          "avatar_url": "https://avatars0.githubusercontent.com/u/28706805?v=3",
          "gravatar_id": "",
          "url": "https://api.github.com/users/eciis",
          "html_url": "https://github.com/eciis",
          "followers_url": "https://api.github.com/users/eciis/followers",
          "following_url": "https://api.github.com/users/eciis/following{/other_user}",
          "gists_url": "https://api.github.com/users/eciis/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/eciis/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/eciis/subscriptions",
          "organizations_url": "https://api.github.com/users/eciis/orgs",
          "repos_url": "https://api.github.com/users/eciis/repos",
          "events_url": "https://api.github.com/users/eciis/events{/privacy}",
          "received_events_url": "https://api.github.com/users/eciis/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "repo": {
          "id": 91336041,
          "name": "web",
          "full_name": "eciis/web",
          "owner": {
            "login": "eciis",
            "id": 28706805,
            "avatar_url": "https://avatars0.githubusercontent.com/u/28706805?v=3",
            "gravatar_id": "",
            "url": "https://api.github.com/users/eciis",
            "html_url": "https://github.com/eciis",
            "followers_url": "https://api.github.com/users/eciis/followers",
            "following_url": "https://api.github.com/users/eciis/following{/other_user}",
            "gists_url": "https://api.github.com/users/eciis/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/eciis/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/eciis/subscriptions",
            "organizations_url": "https://api.github.com/users/eciis/orgs",
            "repos_url": "https://api.github.com/users/eciis/repos",
            "events_url": "https://api.github.com/users/eciis/events{/privacy}",
            "received_events_url": "https://api.github.com/users/eciis/received_events",
            "type": "Organization",
            "site_admin": false
          },
          "private": false,
          "html_url": "https://github.com/eciis/web",
          "description": "AngularJS Frontend with Appengine Python Backend",
          "fork": false,
          "url": "https://api.github.com/repos/eciis/web",
          "forks_url": "https://api.github.com/repos/eciis/web/forks",
          "keys_url": "https://api.github.com/repos/eciis/web/keys{/key_id}",
          "collaborators_url": "https://api.github.com/repos/eciis/web/collaborators{/collaborator}",
          "teams_url": "https://api.github.com/repos/eciis/web/teams",
          "hooks_url": "https://api.github.com/repos/eciis/web/hooks",
          "issue_events_url": "https://api.github.com/repos/eciis/web/issues/events{/number}",
          "events_url": "https://api.github.com/repos/eciis/web/events",
          "assignees_url": "https://api.github.com/repos/eciis/web/assignees{/user}",
          "branches_url": "https://api.github.com/repos/eciis/web/branches{/branch}",
          "tags_url": "https://api.github.com/repos/eciis/web/tags",
          "blobs_url": "https://api.github.com/repos/eciis/web/git/blobs{/sha}",
          "git_tags_url": "https://api.github.com/repos/eciis/web/git/tags{/sha}",
          "git_refs_url": "https://api.github.com/repos/eciis/web/git/refs{/sha}",
          "trees_url": "https://api.github.com/repos/eciis/web/git/trees{/sha}",
          "statuses_url": "https://api.github.com/repos/eciis/web/statuses/{sha}",
          "languages_url": "https://api.github.com/repos/eciis/web/languages",
          "stargazers_url": "https://api.github.com/repos/eciis/web/stargazers",
          "contributors_url": "https://api.github.com/repos/eciis/web/contributors",
          "subscribers_url": "https://api.github.com/repos/eciis/web/subscribers",
          "subscription_url": "https://api.github.com/repos/eciis/web/subscription",
          "commits_url": "https://api.github.com/repos/eciis/web/commits{/sha}",
          "git_commits_url": "https://api.github.com/repos/eciis/web/git/commits{/sha}",
          "comments_url": "https://api.github.com/repos/eciis/web/comments{/number}",
          "issue_comment_url": "https://api.github.com/repos/eciis/web/issues/comments{/number}",
          "contents_url": "https://api.github.com/repos/eciis/web/contents/{+path}",
          "compare_url": "https://api.github.com/repos/eciis/web/compare/{base}...{head}",
          "merges_url": "https://api.github.com/repos/eciis/web/merges",
          "archive_url": "https://api.github.com/repos/eciis/web/{archive_format}{/ref}",
          "downloads_url": "https://api.github.com/repos/eciis/web/downloads",
          "issues_url": "https://api.github.com/repos/eciis/web/issues{/number}",
          "pulls_url": "https://api.github.com/repos/eciis/web/pulls{/number}",
          "milestones_url": "https://api.github.com/repos/eciis/web/milestones{/number}",
          "notifications_url": "https://api.github.com/repos/eciis/web/notifications{?since,all,participating}",
          "labels_url": "https://api.github.com/repos/eciis/web/labels{/name}",
          "releases_url": "https://api.github.com/repos/eciis/web/releases{/id}",
          "deployments_url": "https://api.github.com/repos/eciis/web/deployments",
          "created_at": "2017-05-15T12:37:06Z",
          "updated_at": "2017-06-02T17:45:39Z",
          "pushed_at": "2017-07-05T18:06:42Z",
          "git_url": "git://github.com/eciis/web.git",
          "ssh_url": "git@github.com:eciis/web.git",
          "clone_url": "https://github.com/eciis/web.git",
          "svn_url": "https://github.com/eciis/web",
          "homepage": "",
          "size": 614,
          "stargazers_count": 0,
          "watchers_count": 0,
          "language": "Python",
          "has_issues": true,
          "has_projects": true,
          "has_downloads": true,
          "has_wiki": true,
          "has_pages": false,
          "forks_count": 0,
          "mirror_url": null,
          "open_issues_count": 17,
          "forks": 0,
          "open_issues": 17,
          "watchers": 0,
          "default_branch": "master"
        }
      },
      "base": {
        "label": "eciis:master",
        "ref": "master",
        "sha": "cf95301d5898324fe53c9a0711a400cfa8f774fd",
        "user": {
          "login": "eciis",
          "id": 28706805,
          "avatar_url": "https://avatars0.githubusercontent.com/u/28706805?v=3",
          "gravatar_id": "",
          "url": "https://api.github.com/users/eciis",
          "html_url": "https://github.com/eciis",
          "followers_url": "https://api.github.com/users/eciis/followers",
          "following_url": "https://api.github.com/users/eciis/following{/other_user}",
          "gists_url": "https://api.github.com/users/eciis/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/eciis/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/eciis/subscriptions",
          "organizations_url": "https://api.github.com/users/eciis/orgs",
          "repos_url": "https://api.github.com/users/eciis/repos",
          "events_url": "https://api.github.com/users/eciis/events{/privacy}",
          "received_events_url": "https://api.github.com/users/eciis/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "repo": {
          "id": 91336041,
          "name": "web",
          "full_name": "eciis/web",
          "owner": {
            "login": "eciis",
            "id": 28706805,
            "avatar_url": "https://avatars0.githubusercontent.com/u/28706805?v=3",
            "gravatar_id": "",
            "url": "https://api.github.com/users/eciis",
            "html_url": "https://github.com/eciis",
            "followers_url": "https://api.github.com/users/eciis/followers",
            "following_url": "https://api.github.com/users/eciis/following{/other_user}",
            "gists_url": "https://api.github.com/users/eciis/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/eciis/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/eciis/subscriptions",
            "organizations_url": "https://api.github.com/users/eciis/orgs",
            "repos_url": "https://api.github.com/users/eciis/repos",
            "events_url": "https://api.github.com/users/eciis/events{/privacy}",
            "received_events_url": "https://api.github.com/users/eciis/received_events",
            "type": "Organization",
            "site_admin": false
          },
          "private": false,
          "html_url": "https://github.com/eciis/web",
          "description": "AngularJS Frontend with Appengine Python Backend",
          "fork": false,
          "url": "https://api.github.com/repos/eciis/web",
          "forks_url": "https://api.github.com/repos/eciis/web/forks",
          "keys_url": "https://api.github.com/repos/eciis/web/keys{/key_id}",
          "collaborators_url": "https://api.github.com/repos/eciis/web/collaborators{/collaborator}",
          "teams_url": "https://api.github.com/repos/eciis/web/teams",
          "hooks_url": "https://api.github.com/repos/eciis/web/hooks",
          "issue_events_url": "https://api.github.com/repos/eciis/web/issues/events{/number}",
          "events_url": "https://api.github.com/repos/eciis/web/events",
          "assignees_url": "https://api.github.com/repos/eciis/web/assignees{/user}",
          "branches_url": "https://api.github.com/repos/eciis/web/branches{/branch}",
          "tags_url": "https://api.github.com/repos/eciis/web/tags",
          "blobs_url": "https://api.github.com/repos/eciis/web/git/blobs{/sha}",
          "git_tags_url": "https://api.github.com/repos/eciis/web/git/tags{/sha}",
          "git_refs_url": "https://api.github.com/repos/eciis/web/git/refs{/sha}",
          "trees_url": "https://api.github.com/repos/eciis/web/git/trees{/sha}",
          "statuses_url": "https://api.github.com/repos/eciis/web/statuses/{sha}",
          "languages_url": "https://api.github.com/repos/eciis/web/languages",
          "stargazers_url": "https://api.github.com/repos/eciis/web/stargazers",
          "contributors_url": "https://api.github.com/repos/eciis/web/contributors",
          "subscribers_url": "https://api.github.com/repos/eciis/web/subscribers",
          "subscription_url": "https://api.github.com/repos/eciis/web/subscription",
          "commits_url": "https://api.github.com/repos/eciis/web/commits{/sha}",
          "git_commits_url": "https://api.github.com/repos/eciis/web/git/commits{/sha}",
          "comments_url": "https://api.github.com/repos/eciis/web/comments{/number}",
          "issue_comment_url": "https://api.github.com/repos/eciis/web/issues/comments{/number}",
          "contents_url": "https://api.github.com/repos/eciis/web/contents/{+path}",
          "compare_url": "https://api.github.com/repos/eciis/web/compare/{base}...{head}",
          "merges_url": "https://api.github.com/repos/eciis/web/merges",
          "archive_url": "https://api.github.com/repos/eciis/web/{archive_format}{/ref}",
          "downloads_url": "https://api.github.com/repos/eciis/web/downloads",
          "issues_url": "https://api.github.com/repos/eciis/web/issues{/number}",
          "pulls_url": "https://api.github.com/repos/eciis/web/pulls{/number}",
          "milestones_url": "https://api.github.com/repos/eciis/web/milestones{/number}",
          "notifications_url": "https://api.github.com/repos/eciis/web/notifications{?since,all,participating}",
          "labels_url": "https://api.github.com/repos/eciis/web/labels{/name}",
          "releases_url": "https://api.github.com/repos/eciis/web/releases{/id}",
          "deployments_url": "https://api.github.com/repos/eciis/web/deployments",
          "created_at": "2017-05-15T12:37:06Z",
          "updated_at": "2017-06-02T17:45:39Z",
          "pushed_at": "2017-07-05T18:06:42Z",
          "git_url": "git://github.com/eciis/web.git",
          "ssh_url": "git@github.com:eciis/web.git",
          "clone_url": "https://github.com/eciis/web.git",
          "svn_url": "https://github.com/eciis/web",
          "homepage": "",
          "size": 614,
          "stargazers_count": 0,
          "watchers_count": 0,
          "language": "Python",
          "has_issues": true,
          "has_projects": true,
          "has_downloads": true,
          "has_wiki": true,
          "has_pages": false,
          "forks_count": 0,
          "mirror_url": null,
          "open_issues_count": 17,
          "forks": 0,
          "open_issues": 17,
          "watchers": 0,
          "default_branch": "master"
        }
      },
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/eciis/web/pulls/151"
        },
        "html": {
          "href": "https://github.com/eciis/web/pull/151"
        },
        "issue": {
          "href": "https://api.github.com/repos/eciis/web/issues/151"
        },
        "comments": {
          "href": "https://api.github.com/repos/eciis/web/issues/151/comments"
        },
        "review_comments": {
          "href": "https://api.github.com/repos/eciis/web/pulls/151/comments"
        },
        "review_comment": {
          "href": "https://api.github.com/repos/eciis/web/pulls/comments{/number}"
        },
        "commits": {
          "href": "https://api.github.com/repos/eciis/web/pulls/151/commits"
        },
        "statuses": {
          "href": "https://api.github.com/repos/eciis/web/statuses/dfabc07d461fa5a0b8c02993f7890942e81cfb12"
        }
      }
    }
  },
  "public": true,
  "created_at": "2017-07-05T18:07:52Z",
  "org": {
    "id": 28706805,
    "login": "eciis",
    "gravatar_id": "",
    "url": "https://api.github.com/orgs/eciis",
    "avatar_url": "https://avatars.githubusercontent.com/u/28706805?"
  },
  "a_structure": "{avatar_url:,events_url:,followers_url:,following_url:,gists_url:,gravatar_id:,html_url:,id:,login:,organizations_url:,received_events_url:,repos_url:,site_admin:,starred_url:,subscriptions_url:,type:,url:}"
}